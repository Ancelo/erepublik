{"ts":1357327056989,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\r\n\r\nif (!class_exists(\"Item\")) {\r\nclass Item\r\n{\r\n\tpublic $id;\r\n\tprivate $qRows=array('id','name','type','json');\r\n\t\r\n\t\r\n\tfunction __construct($id=false)\r\n\t{\r\n\t\tif($id){\r\n\t\t\t$this->id=(int)$id;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static function getItem($id,$rewrite=false)\r\n\t{\r\n\t\t$id=(int)$id;\r\n\t\t$key='itemsType'.$id;\r\n\t\tif( (($items=Memcached::get($key))===false) || $rewrite )\r\n\t\t{\r\n\t\t\t$items=array();\r\n\t\t\t$query=\"SELECT * FROM items WHERE type='\".$id.\"' \";\r\n\t\t\t$result=mysql_query($query,$GLOBALS['db_slave']);\r\n\t\t\tif(mysql_num_rows($result)<1){ return false;}\r\n\t\t\t$myArray=mysql_fetch_array($result);\r\n\t\t\t\r\n\t\t\t$myArray['json']=json_decode($myArray['json']);\r\n\t\t\t$items=$myArray;\r\n\t\t\tMemcached::set($key,$items);\r\n\t\t}\r\n\t\treturn $myArray;\r\n\t}\r\n}}\r\n\r\n?>"]],"start1":0,"start2":0,"length1":0,"length2":745}]],"length":745}
