{"ts":1357327152866,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\r\n\r\nfunction loadPosition(){\r\n\r\n\tif(typeof User_Position!='undefined' && User_Position!='')\r\n\t{\r\n\r\n\t\tif(User_Position.indexOf(':buscar_')!=-1)\r\n\t\t{\r\n\t\t\tvar info=User_Position.split(':buscar_');\r\n\t\t\tif(info[1]!='' && info[0]!=''){\r\n\t\t\t\tcall_buscador(info[1],info[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(User_Position.indexOf('last_')!=-1)\r\n\t\t{\r\n\t\t\tvar cat_id=User_Position.split(\"_\");\r\n\t\t\t\r\n\t\t\tif(cat_id[1]!=''){\r\n\t\t\t\tcall_ultimes(cat_id[1],cat_id[2]);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(User_Position.indexOf('tutorial_')!=-1)\r\n\t\t{\r\n\t\t\tvar tut_id=User_Position.replace('tutorial_','');\r\n\t\t\tif(tut_id!=''){\r\n\t\t\t\tcall_tutorial(tut_id);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tobre(User_Position);\r\n\t\t}\r\n\t\t\r\n\t}else{\r\n\t\tobre('indice');\r\n\t}\r\n}\r\n\r\nfunction obre(section)\r\n{\r\n\tvar url='';\r\n\t\r\n\tif(section=='lists'){\r\n\t\turl=urlScripts+\"lists/lists.php\";\r\n\t}else if(section=='createList'){\r\n\t\turl=urlTemplates+\"lists/new.htm\";\r\n\t}else{\r\n\t\treturn false;\r\n\t}\r\n\tcarregar_bloc(url,section);\r\n}\r\nfunction searchCategory(id)\r\n{\r\n\tvar url='/scripts/search/index.php';\r\n\t$.post(url,{category:id},function(data){\r\n\t\tif(data==0){\r\n\t\t\tgritter_alert('Error','No se han encontrado resultados');\r\n\t\t}else{\r\n\t\t\t\r\n\t\t}\r\n\t\r\n\t});\r\n}\r\nfunction addIngredient(obj)\r\n{\r\n\tvar ingredient=$(obj).val();\r\n\t/*regex per treure el nom i la quantitat de lingredient hauria de trobar:\r\n\t\t300gr de coca\r\n\t\tcoca 300gr\r\n\t\t3kg coca\r\n\t\t3 kilos de coca\r\n\t*/\r\n\t// de moment sistema cutre\r\n\tingredient=ingredient.split(' ');\r\n\tname=ingredient[0];\r\n\tquantity=ingredient[1];\r\n\t\r\n\tif(typeof searchIngredients =='undefined'){\r\n\t\tsearchIngredients=new Array();\r\n\t}\r\n\tsearchIngredients[name]=quantity;\r\n\t\r\n\t$('.ingredientsList').append('<div class=\"ingredient\" >'+name+' ('+quantity+') <span onclick=\"delIngredient(this);\" class=\"pointer\">[x]</span></div>');\r\n\t$('#findMenu').removeClass('oculto');\r\n\t$(obj).val('');\r\n\t$(obj).attr('placeholder','puedes añadir más..');\r\n}\r\nfunction delIngredient(obj)\r\n{\r\n\tvar ingredient=$(obj).val();\r\n\tingredient=ingredient.split(' (');\r\n\t//regex per treure el nom i la quantitat de lingredient\r\n\t\r\n\tsearchIngredients.splice(name, 1);\r\n\t$(obj).remove();\r\n}\r\nfunction checkLogin()\r\n{\r\n\tvar user=$('#userLogin').val();\r\n\tvar pass=$('#userPass').val();\r\n\tif(user=='' || pass==''){\r\n\t\treturn false;\r\n\t}\r\n\tvar url='/scripts/login/login.php';\r\n\t$.post(url,{user:user,pass:pass},function(data){\r\n\t\tif(data==1){\r\n\t\t\tlocation.reload();\r\n\t\t}else if(data==2){\r\n\t\t\tgritter_alert('Error','Los datos no coinciden');\r\n\t\t}else if(data==3){\r\n\t\t\tgritter_alert('Error','Usuario expulsado');\r\n\t\t}\r\n\t\r\n\t});\r\n}\r\nfunction registerForm(){\r\n\tvar htm='Usuario: <input id=\"userLogin\" type=\"text\" /><br>'\r\n\t+'Contraseña: <input id=\"userPass\" type=\"password\" /><br>'\r\n\t+'Repite contraseña: <input id=\"userPass2\" type=\"password\" /><br>'\r\n\t+'Email: <input id=\"email\" type=\"text\" /><br>'\r\n\t+'<button onclick=\"register();\">Registrarse</button><br>';\r\n\t$('#loginForm').html(htm);\r\n}\r\nfunction register(){\r\n\tvar user=$('#userLogin').val();\r\n\tvar pass=$('#userPass').val();\r\n\tvar pass2=$('#userPass2').val();\r\n\tvar email=$('#email').val();\r\n\t\r\n\tif(user!='' && pass!='' && pass2!='' && email!=''){\r\n\t\r\n\t\tif(pass!=pass2){\r\n\t\t\tgritter_alert('Error','Las contraseñas no encajan!');\r\n\t\t\t$('#userPass').focus();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar filter = /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\r\n\t\tif (!filter.test(email)) {\r\n\t\t\tgritter_alert('Error','Email inválido!');\r\n\t\t\t$('#email').focus();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\turl=\"scripts/login/register.php\";\r\n\t\t$.post(url, { user:user,pass:pass,email:email },\r\n\t\tfunction(data){\r\n\t\t\tif(data==1){\r\n\t\t\t\tsavePosition('upload');\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}else if(data==2){\r\n\t\t\t\tgritter_alert('Error','Nick/Email en uso');\r\n\t\t\t}else if(data==3){\r\n\t\t\t\tgritter_alert('Error','Estás logueado... :S');\r\n\t\t\t}else{\r\n\t\t\t\tgritter_alert('Error','Servidores ocupados');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}else{\r\n\t\tgritter_alert('Error','Has d\\'omplir totes les dades!');\r\n\t}\r\n}\r\nfunction menuSelector(option)\r\n{\r\n\t$('#menuSelector').hide('slow');\r\n\t$('#menuSelector'+option).removeClass('oculto');\r\n}\r\nfunction declara(varName,varType)\r\n{\r\n\tif(typeof searchIngredients =='undefined'){\r\n\t\tif(varType=='array'){\r\n\t\t\tvarName=new Array();\r\n\t\t}else{\r\n\t\t\tvarName='';\r\n\t\t}\r\n\t}\r\n\treturn varName;\r\n}"]],"start1":0,"start2":0,"length1":0,"length2":4228}]],"length":4228}
{"contributors":[],"silentsave":true,"ts":1357327161315,"patch":[[{"diffs":[[0,"\n}\r\n"],[-1,"function addIngredient(obj)\r\n{\r\n\tvar ingredient=$(obj).val();\r\n\t/*regex per treure el nom i la quantitat de lingredient hauria de trobar:\r\n\t\t300gr de coca\r\n\t\tcoca 300gr\r\n\t\t3kg coca\r\n\t\t3 kilos de coca\r\n\t*/\r\n\t// de moment sistema cutre\r\n\tingredient=ingredient.split(' ');\r\n\tname=ingredient[0];\r\n\tquantity=ingredient[1];\r\n\t\r\n\tif(typeof searchIngredients =='undefined'){\r\n\t\tsearchIngredients=new Array();\r\n\t}\r\n\tsearchIngredients[name]=quantity;\r\n\t\r\n\t$('.ingredientsList').append('<div class=\"ingredient\" >'+name+' ('+quantity+') <span onclick=\"delIngredient(this);\" class=\"pointer\">[x]</span></div>');\r\n\t$('#findMenu').removeClass('oculto');\r\n\t$(obj).val('');\r\n\t$(obj).attr('placeholder','puedes añadir más..');\r\n}\r\nfunction delIngredient(obj)\r\n{\r\n\tvar ingredient=$(obj).val();\r\n\tingredient=ingredient.split(' (');\r\n\t//regex per treure el nom i la quantitat de lingredient\r\n\t\r\n\tsearchIngredients.splice(name, 1);\r\n\t$(obj).remove();\r\n}"],[0,"\r\nfu"]],"start1":1156,"start2":1156,"length1":938,"length2":8}]],"length":3298,"saved":false}
{"ts":1357327162328,"patch":[[{"diffs":[[0,"\t\r\n\t});\r\n}\r\n"],[-1,"\r\n"],[0,"function che"]],"start1":1148,"start2":1148,"length1":26,"length2":24}]],"length":3296,"saved":false}
{"ts":1357327170221,"patch":[[{"diffs":[[0,"\n}\r\n"],[-1,"function declara(varName,varType)\r\n{\r\n\tif(typeof searchIngredients =='undefined'){\r\n\t\tif(varType=='array'){\r\n\t\t\tvarName=new Array();\r\n\t\t}else{\r\n\t\t\tvarName='';\r\n\t\t}\r\n\t}\r\n\treturn varName;\r\n}"]],"start1":3104,"start2":3104,"length1":192,"length2":4}]],"length":3108,"saved":false}
